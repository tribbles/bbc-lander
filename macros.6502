MACRO THRUSTDEC addr
; Reduces the thrust value
    LDA addr
    BEQ noshrink
    BMI incshrink
    DEC addr
    BPL noshrink
.incshrink
    INC addr
.noshrink
ENDMACRO

MACRO THRUSTADD addr
; X and Y are preserved, but N and Z must be set
    BEQ noadd
    BMI negadd
    LSR A
    CLC
    ADC addr
    BMI nunflow
    CMP #95
    BCC novflow
    LDA #95
.novflow
    STA addr
    JMP noadd
.negadd
    LSR A
    ORA #128
    CLC
    ADC addr
    BPL nunflow
    CMP #LO(-95)
    BCS nunflow
    LDA #LO(-95)
.nunflow
    STA addr
.noadd
ENDMACRO

